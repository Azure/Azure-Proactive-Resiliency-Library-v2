- recommendation: ST-1 - Ensure that Storage Account configuration is at least Zone redundant
  category: Availability
  impact: High
  state: Preview
  argQueryAvailable: "Yes"
  verified: true
  visible: true
  tags:
    - alz
  properties:
    metricName: Availability
    metricNamespace: Microsoft.Storage/storageAccounts
    severity: 1
    windowSize: PT5M
    evaluationFrequency: PT5M
    timeAggregation: Average
    operator: LessThan
    threshold: 90
    criterionType: StaticThresholdCriterion
    autoMitigate: false
  references:
    - name: Monitoring Availability
      url: https://learn.microsoft.com/troubleshoot/azure/azure-storage/storage-monitoring-diagnosing-troubleshooting?toc=%2Fazure%2Fstorage%2Fblobs%2Ftoc.json&tabs=dotnet#monitoring-availability
    - name: Supported metrics for Microsoft.Storage/storageAccounts
      url: https://learn.microsoft.com/azure/azure-monitor/reference/supported-metrics/microsoft-storage-storageaccounts-metrics
  deployments:
    - name: Deploy SA Availability Alert
      template: Deploy-SA-Availability-Alert.json
      type: Policy
      tags:
        - alz
      properties:
        scope: Resource
        multiResource: false
